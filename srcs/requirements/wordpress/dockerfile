ARG     OS_VERSION=3.12.0
FROM    alpine:${OS_VERSION}

# only for test 
RUN apk update ; apk add vim nginx openrc openssl
RUN mkdir /run/openrc ; touch /run/openrc/softlevel ; openrc


RUN apk update ; apk add --no-cache curl php7 php7-fpm php7-mysqli \
                        php7-json php7-curl php7-gd php7-openssl \
                        php7-session php7-zlib php7-mbstring php7-dom \
                        php7-xml php7-zip php7-tokenizer php7-xmlwriter \
                        php7-simplexml php7-ctype php7-iconv php7-fileinfo \
                        php7-intl php7-bcmath php7-opcache php7-pdo php7-pdo_mysql
WORKDIR /var/www

RUN set -eux; \
    curl -o wordpress.tar.gz -fSL "https://wordpress.org/latest.tar.gz"; \
    tar -xzf wordpress.tar.gz --strip-components=1; \
    rm wordpress.tar.gz

CMD ["php-fpm7", "-F"]